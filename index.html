<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADIGES Model Questionnaire</title>
    
    <!-- Include libraries for PDF generation with visual capture -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #2c2c2c;
            min-height: 100vh;
            padding: 20px;
            color: #ffffff;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: #ffffff;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: #2c2c2c;
            color: #ffffff;
            padding: 40px 30px;
            text-align: center;
            position: relative;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, 
                transparent 0%, 
                transparent 30%, 
                rgba(183, 255, 47, 0.1) 35%, 
                rgba(183, 255, 47, 0.1) 65%, 
                transparent 70%, 
                transparent 100%);
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 300;
            position: relative;
            z-index: 2;
        }

        .header h1::after {
            content: '';
            display: inline-block;
            width: 20px;
            height: 20px;
            background: #b7ff2f;
            border-radius: 50%;
            margin-left: 15px;
            box-shadow: 0 0 20px rgba(183, 255, 47, 0.5);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
            position: relative;
            z-index: 2;
        }

        .instructions {
            background: #f8f9fa;
            padding: 30px;
            border-left: 5px solid #b7ff2f;
            margin: 20px;
            border-radius: 10px;
            color: #2c2c2c;
        }

        .instructions h3 {
            color: #2c2c2c;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .instructions ul {
            list-style: none;
        }

        .instructions li {
            margin: 8px 0;
            padding: 5px 0;
            color: #555;
        }

        .instructions li::before {
            content: 'â€¢';
            color: #b7ff2f;
            font-weight: bold;
            display: inline-block;
            width: 1em;
            margin-right: 5px;
        }

        .scoring-table {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            border: 1px solid #e9ecef;
        }

        .scoring-table table {
            width: 100%;
            border-collapse: collapse;
        }

        .scoring-table th {
            background: #2c2c2c;
            color: white;
            padding: 15px;
            text-align: center;
            font-weight: 500;
        }

        .scoring-table td {
            padding: 12px 15px;
            text-align: center;
            border-bottom: 1px solid #f1f1f1;
            color: #2c2c2c;
        }

        .scoring-table tr:hover {
            background: #f8f9fa;
        }

        .content {
            padding: 30px;
            background: #ffffff;
        }

        .question-block {
            background: white;
            border: 2px solid #f1f1f1;
            border-radius: 15px;
            margin: 20px 0;
            padding: 25px;
            transition: all 0.3s ease;
        }

        .question-block:hover {
            border-color: #b7ff2f;
            box-shadow: 0 5px 15px rgba(183, 255, 47, 0.1);
        }

        .question-block.completed {
            border-color: #b7ff2f;
            background: #fafffe;
        }

        .question-block.error {
            border-color: #ff6b6b;
            background: #fff8f8;
        }

        .question-block.hide-for-pdf {
            display: none !important;
        }

        .question-number {
            background: #2c2c2c;
            color: #b7ff2f;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .question-text {
            font-size: 1.1em;
            font-weight: 600;
            color: #2c2c2c;
            margin-bottom: 20px;
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .option {
            background: #fafafa;
            border: 2px solid #f1f1f1;
            border-radius: 10px;
            padding: 15px;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            min-height: 150px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .option:hover {
            border-color: #b7ff2f;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(183, 255, 47, 0.1);
        }

        .option.selected {
            border-color: #b7ff2f;
            background: #fafffe;
        }

        .option-text {
            margin-bottom: 10px;
            font-size: 0.95em;
            line-height: 1.4;
            color: #2c2c2c;
        }

        .score-selector {
            display: flex;
            gap: 8px;
            justify-content: center;
        }

        .score-btn {
            width: 35px;
            height: 35px;
            border: 2px solid #ddd;
            background: white;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9em;
            transition: all 0.3s ease;
        }

        .score-btn:hover:not(:disabled) {
            border-color: #b7ff2f;
            background: #fafffe;
            transform: scale(1.1);
        }

        .score-btn.selected {
            background: #b7ff2f;
            border-color: #b7ff2f;
            color: #2c2c2c;
            box-shadow: 0 0 10px rgba(183, 255, 47, 0.3);
        }

        .score-btn.used {
            background: #e9ecef;
            border-color: #dee2e6;
            color: #adb5bd;
            cursor: not-allowed;
            opacity: 0.6;
        }

        .validation-message {
            margin-top: 10px;
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 0.9em;
            background: #fff3cd;
            border: 1px solid #ffc107;
            color: #856404;
            opacity: 0;
            transition: all 0.3s ease;
            height: 0;
            overflow: hidden;
        }

        .validation-message.show {
            opacity: 1;
            height: auto;
            margin-top: 15px;
        }

        .validation-message.error {
            background: #f8d7da;
            border-color: #f5c6cb;
            color: #721c24;
        }

        .progress-bar {
            background: #f1f1f1;
            border-radius: 50px;
            height: 30px;
            margin: 30px 20px;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            background: linear-gradient(90deg, #b7ff2f 0%, #8bc34a 100%);
            height: 100%;
            width: 0;
            transition: width 0.5s ease;
            border-radius: 50px;
            box-shadow: 0 2px 10px rgba(183, 255, 47, 0.3);
        }

        .total-score {
            background: #2c2c2c;
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px;
            text-align: center;
            font-size: 1.2em;
            transition: all 0.3s ease;
        }

        .total-score.error {
            background: #ff6b6b;
        }

        .total-score.success {
            background: #b7ff2f;
            color: #2c2c2c;
        }

        .calculate-btn {
            background: linear-gradient(45deg, #b7ff2f, #8bc34a);
            color: #2c2c2c;
            border: none;
            padding: 15px 40px;
            font-size: 1.2em;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            margin: 30px auto;
            display: block;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(183, 255, 47, 0.3);
        }

        .calculate-btn:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(183, 255, 47, 0.4);
        }

        .calculate-btn:disabled {
            background: #e9ecef;
            color: #adb5bd;
            cursor: not-allowed;
            box-shadow: none;
        }

        .results {
            background: #ffffff;
            border-radius: 20px;
            padding: 40px;
            margin: 30px 20px;
            display: none;
        }

        .results.show {
            display: block;
        }

        .results h2 {
            text-align: center;
            color: #2c2c2c;
            margin-bottom: 30px;
            font-size: 2em;
            font-weight: 300;
        }

        .scores-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .score-card {
            background: #fafafa;
            border: 2px solid #f1f1f1;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .score-card:hover {
            border-color: #b7ff2f;
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(183, 255, 47, 0.2);
        }

        .score-card.highest {
            background: #b7ff2f;
            border-color: #b7ff2f;
        }

        .score-card.highest .score-letter,
        .score-card.highest .score-value {
            color: #2c2c2c;
        }

        .score-letter {
            font-size: 2em;
            font-weight: bold;
            color: #b7ff2f;
            margin-bottom: 10px;
        }

        .score-name {
            font-size: 1.1em;
            color: #666;
            margin-bottom: 15px;
        }

        .score-value {
            font-size: 2.5em;
            font-weight: bold;
            color: #2c2c2c;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .action-btn {
            padding: 12px 30px;
            border: 2px solid #b7ff2f;
            background: white;
            color: #2c2c2c;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 1em;
        }

        .action-btn:hover {
            background: #b7ff2f;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(183, 255, 47, 0.3);
        }

        .action-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .test-btn {
            background: #ff6b6b;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            margin: 20px auto;
            display: block;
        }

        .test-btn:hover {
            background: #ff5252;
            transform: translateY(-2px);
        }

        .hide-for-pdf {
            display: none !important;
        }

        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 10000;
        }

        .loading-overlay.show {
            display: flex;
        }

        .loading-spinner {
            background: white;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #b7ff2f;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }
            
            .options-grid {
                grid-template-columns: 1fr;
            }
            
            .scores-grid {
                grid-template-columns: 1fr;
            }
        }

        .pdf-date {
            text-align: center;
            padding: 20px;
            background: #f8f9fa;
            margin: 20px;
            border-radius: 10px;
            color: #2c2c2c;
            font-size: 1.1em;
            display: none;
        }

        .pdf-date.show {
            display: block;
        }
    </style>
</head>
<body>
    <div class="container" id="mainContainer">
        <div class="header">
            <h1>ADIGES Model Questionnaire</h1>
            <p>Personality Profile Assessment Tool</p>
        </div>
        
        <div class="instructions" id="instructionsSection">
            <h3>Instructions</h3>
            <ul>
                <li>The questionnaire contains 20 questions</li>
                <li>Each question presents 4 options</li>
                <li>For each question, rank the options by giving them scores: 8, 4, 2, 1</li>
                <li>Use each score only once per question</li>
                <li>The total sum must equal 300 points</li>
            </ul>
            
            <div class="scoring-table">
                <table>
                    <thead>
                        <tr>
                            <th>Score</th>
                            <th>Meaning</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>8</strong></td>
                            <td>Most characteristic of me</td>
                        </tr>
                        <tr>
                            <td><strong>4</strong></td>
                            <td>Quite characteristic of me</td>
                        </tr>
                        <tr>
                            <td><strong>2</strong></td>
                            <td>Somewhat characteristic of me</td>
                        </tr>
                        <tr>
                            <td><strong>1</strong></td>
                            <td>Least characteristic of me</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <div class="progress-bar" id="progressBar">
            <div class="progress-fill" id="progressFill"></div>
        </div>
        
        <div class="total-score" id="totalScore">
            Total Points: <span id="totalPoints">0</span> / 300
        </div>
        
        <div class="content" id="questionnaire"></div>
        
        <button class="calculate-btn" id="calculateBtn" disabled>Calculate Results</button>
        
        <!-- Test Mode Button -->
        <div class="lirix-logo-wrapper">
        <img src="data:image/png;base64,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" alt="Lirix Logo" class="lirix-logo-final">
    </div>
    <style>
        .lirix-logo-wrapper {
            display: flex;
            justify-content: flex-end;
            padding: 0 20px 20px 0;
            background: white;
        }
        .lirix-logo-final {
            width: 120px;
            opacity: 0.95;
        }
    </style>

    

        
        <div class="pdf-date" id="pdfDate"></div>
        
        <div class="results" id="results">
            <h2>Your Assessment Results</h2>
            <div class="scores-grid" id="scoresGrid"></div>
            <div class="action-buttons" id="actionButtons">
                <button class="action-btn" onclick="downloadVisualPDF()">ðŸ“„ Download Results as PDF</button>
                </div>
        </div>
    </div>

    <!-- Loading overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner">
            <div class="spinner"></div>
            <p>Generating PDF...</p>
        </div>
    </div>
    
    <script>
        // Questionnaire data
        const questions = [
            {
                text: "I am a person who:",
                options: [
                    { text: "Thinks, analyzes, and solves problems logically", category: "P" },
                    { text: "Helps others who need help and support", category: "E" },
                    { text: "Acts independently and according to my feelings", category: "I" },
                    { text: "Enjoys working in teams and collaborating", category: "A" }
                ]
            },
            {
                text: "My work approach is:",
                options: [
                    { text: "Structured and methodical", category: "P" },
                    { text: "Based on human relationships", category: "E" },
                    { text: "Creative and innovative", category: "I" },
                    { text: "Flexible and adaptable", category: "A" }
                ]
            },
            {
                text: "When making decisions I:",
                options: [
                    { text: "Rely on facts and objective data", category: "P" },
                    { text: "Consider people's feelings", category: "E" },
                    { text: "Trust my intuition and gut feeling", category: "I" },
                    { text: "Seek broad consensus", category: "A" }
                ]
            },
            {
                text: "I prefer tasks that:",
                options: [
                    { text: "Require analysis and planning", category: "P" },
                    { text: "Involve helping and supporting people", category: "E" },
                    { text: "Allow creative expression", category: "I" },
                    { text: "Require teamwork", category: "A" }
                ]
            },
            {
                text: "I feel satisfied when I:",
                options: [
                    { text: "Solve complex problems", category: "P" },
                    { text: "Help someone succeed", category: "E" },
                    { text: "Create something new and original", category: "I" },
                    { text: "Achieve team harmony", category: "A" }
                ]
            },
            {
                text: "In conflict situations I:",
                options: [
                    { text: "Look for logical and practical solutions", category: "P" },
                    { text: "Try to understand everyone's feelings", category: "E" },
                    { text: "Express my opinion directly", category: "I" },
                    { text: "Seek compromise and mediation", category: "A" }
                ]
            },
            {
                text: "My communication style is:",
                options: [
                    { text: "Direct and to the point", category: "P" },
                    { text: "Warm and empathetic", category: "E" },
                    { text: "Enthusiastic and inspiring", category: "I" },
                    { text: "Diplomatic and inclusive", category: "A" }
                ]
            },
            {
                text: "I learn best through:",
                options: [
                    { text: "Logic and systematic analysis", category: "P" },
                    { text: "Personal experiences and stories", category: "E" },
                    { text: "Experimentation and discovery", category: "I" },
                    { text: "Group discussions", category: "A" }
                ]
            },
            {
                text: "My contribution to a team is:",
                options: [
                    { text: "Analysis and strategic planning", category: "P" },
                    { text: "Support and encouragement", category: "E" },
                    { text: "New ideas and vision", category: "I" },
                    { text: "Coordination and harmony", category: "A" }
                ]
            },
            {
                text: "I am motivated by:",
                options: [
                    { text: "Achieving measurable results", category: "P" },
                    { text: "Making a positive impact on people", category: "E" },
                    { text: "Personal challenge and growth", category: "I" },
                    { text: "Being part of something bigger", category: "A" }
                ]
            },
            {
                text: "In my free time I prefer:",
                options: [
                    { text: "Activities that challenge my mind", category: "P" },
                    { text: "Spending time with friends and family", category: "E" },
                    { text: "Pursuing personal hobbies", category: "I" },
                    { text: "Group activities and social events", category: "A" }
                ]
            },
            {
                text: "I handle stress by:",
                options: [
                    { text: "Analyzing the situation and making a plan", category: "P" },
                    { text: "Talking with someone I trust", category: "E" },
                    { text: "Finding creative outlets", category: "I" },
                    { text: "Seeking support from the group", category: "A" }
                ]
            },
            {
                text: "My leadership style is:",
                options: [
                    { text: "Goal and results oriented", category: "P" },
                    { text: "Supportive and people-focused", category: "E" },
                    { text: "Visionary and inspiring", category: "I" },
                    { text: "Participative and inclusive", category: "A" }
                ]
            },
            {
                text: "I prefer a work environment that:",
                options: [
                    { text: "Is organized and efficient", category: "P" },
                    { text: "Is warm and supportive", category: "E" },
                    { text: "Encourages innovation and creativity", category: "I" },
                    { text: "Promotes collaboration and teamwork", category: "A" }
                ]
            },
            {
                text: "My strengths include:",
                options: [
                    { text: "Analytical thinking and problem solving", category: "P" },
                    { text: "Empathy and interpersonal skills", category: "E" },
                    { text: "Creativity and original thinking", category: "I" },
                    { text: "Cooperation and flexibility", category: "A" }
                ]
            },
            {
                text: "I prefer feedback that is:",
                options: [
                    { text: "Objective and specific", category: "P" },
                    { text: "Constructive and encouraging", category: "E" },
                    { text: "Direct and challenging", category: "I" },
                    { text: "Balanced and considerate", category: "A" }
                ]
            },
            {
                text: "When planning a project I:",
                options: [
                    { text: "Create detailed timelines and milestones", category: "P" },
                    { text: "Consider team members' needs and strengths", category: "E" },
                    { text: "Focus on the creative vision", category: "I" },
                    { text: "Ensure everyone is involved and heard", category: "A" }
                ]
            },
            {
                text: "I define success as:",
                options: [
                    { text: "Achieving goals efficiently", category: "P" },
                    { text: "Making a difference in people's lives", category: "E" },
                    { text: "Personal fulfillment and growth", category: "I" },
                    { text: "Team achievement and harmony", category: "A" }
                ]
            },
            {
                text: "My approach to change is:",
                options: [
                    { text: "Analyze benefits and risks", category: "P" },
                    { text: "Consider impact on people", category: "E" },
                    { text: "Embrace it as an opportunity", category: "I" },
                    { text: "Ensure group adaptation", category: "A" }
                ]
            },
            {
                text: "I value most:",
                options: [
                    { text: "Efficiency and productivity", category: "P" },
                    { text: "Meaningful relationships", category: "E" },
                    { text: "Independence and authenticity", category: "I" },
                    { text: "Harmony and cooperation", category: "A" }
                ]
            }
        ];
        
        const categoryLabels = {
            'I': 'Implementer',
            'E': 'Empathizer',
            'A': 'Adapter',
            'P': 'Producer'
        };
        
        let answers = {};
        
        // Initialize questionnaire
        function initQuestionnaire() {
            const questionnaireDiv = document.getElementById('questionnaire');
            
            questions.forEach((question, questionIndex) => {
                const questionBlock = document.createElement('div');
                questionBlock.className = 'question-block';
                questionBlock.id = `question-${questionIndex}`;
                
                questionBlock.innerHTML = `
                    <div class="question-number">${questionIndex + 1}</div>
                    <div class="question-text">${question.text}</div>
                    <div class="options-grid">
                        ${question.options.map((option, optionIndex) => `
                            <div class="option" data-question="${questionIndex}" data-option="${optionIndex}">
                                <div class="option-text">${option.text}</div>
                                <div class="score-selector">
                                    ${[8, 4, 2, 1].map(score => `
                                        <button class="score-btn" data-score="${score}">${score}</button>
                                    `).join('')}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                    <div class="validation-message" id="validation-${questionIndex}"></div>
                `;
                
                questionnaireDiv.appendChild(questionBlock);
            });
            
            addEventListeners();
        }
        
        function addEventListeners() {
            document.querySelectorAll('.score-btn').forEach(btn => {
                btn.addEventListener('click', handleScoreSelection);
            });
        }
        
        function handleScoreSelection(e) {
            e.stopPropagation();
            const btn = e.target;
            const option = btn.closest('.option');
            const questionIndex = parseInt(option.dataset.question);
            const optionIndex = parseInt(option.dataset.option);
            const score = parseInt(btn.dataset.score);
            
            if (!answers[questionIndex]) {
                answers[questionIndex] = {};
            }
            
            const currentScores = Object.values(answers[questionIndex]);
            if (currentScores.includes(score) && answers[questionIndex][optionIndex] !== score) {
                showValidationMessage(questionIndex, 'This score is already used in this question', 'error');
                return;
            }
            
            if (answers[questionIndex][optionIndex] === score) {
                delete answers[questionIndex][optionIndex];
                btn.classList.remove('selected');
            } else {
                answers[questionIndex][optionIndex] = score;
                updateOptionButtons(questionIndex, optionIndex);
            }
            
            validateQuestion(questionIndex);
            updateProgress();
        }
        
        function updateOptionButtons(questionIndex, selectedOption) {
            const questionBlock = document.getElementById(`question-${questionIndex}`);
            const options = questionBlock.querySelectorAll('.option');
            
            options.forEach((option, oIndex) => {
                const buttons = option.querySelectorAll('.score-btn');
                const selectedScore = answers[questionIndex][oIndex];
                
                buttons.forEach(btn => {
                    const score = parseInt(btn.dataset.score);
                    btn.classList.remove('selected', 'used');
                    
                    if (selectedScore === score) {
                        btn.classList.add('selected');
                    } else if (answers[questionIndex] && Object.values(answers[questionIndex]).includes(score)) {
                        btn.classList.add('used');
                    }
                });
            });
        }
        
        function validateQuestion(questionIndex) {
            const questionAnswers = answers[questionIndex] || {};
            const scores = Object.values(questionAnswers);
            const requiredScores = [8, 4, 2, 1];
            
            const isComplete = requiredScores.every(score => scores.includes(score)) && scores.length === 4;
            const questionBlock = document.getElementById(`question-${questionIndex}`);
            const validationMsg = document.getElementById(`validation-${questionIndex}`);
            
            if (isComplete) {
                questionBlock.classList.add('completed');
                questionBlock.classList.remove('error');
                validationMsg.classList.remove('show');
            } else if (scores.length > 0) {
                questionBlock.classList.add('error');
                questionBlock.classList.remove('completed');
                showValidationMessage(questionIndex, 'Please assign all values: 8, 4, 2, 1 exactly once');
            } else {
                questionBlock.classList.remove('completed', 'error');
                validationMsg.classList.remove('show');
            }
            
            updateCalculateButton();
        }
        
        function showValidationMessage(questionIndex, message, type = 'warning') {
            const validationMsg = document.getElementById(`validation-${questionIndex}`);
            validationMsg.textContent = message;
            validationMsg.classList.remove('error');
            if (type === 'error') {
                validationMsg.classList.add('error');
            }
            validationMsg.classList.add('show');
        }
        
        function updateProgress() {
            const completedQuestions = Object.keys(answers).filter(qIndex => {
                const questionAnswers = answers[qIndex] || {};
                const scores = Object.values(questionAnswers);
                const requiredScores = [8, 4, 2, 1];
                return requiredScores.every(score => scores.includes(score)) && scores.length === 4;
            }).length;
            
            const progress = (completedQuestions / questions.length) * 100;
            document.getElementById('progressFill').style.width = `${progress}%`;
            
            updateTotalScore();
        }
        
        function updateTotalScore() {
            let total = 0;
            Object.values(answers).forEach(questionAnswers => {
                Object.values(questionAnswers).forEach(score => {
                    total += score;
                });
            });
            
            const totalElement = document.getElementById('totalPoints');
            const totalContainer = document.getElementById('totalScore');
            
            totalElement.textContent = total;
            
            if (total === 300) {
                totalContainer.classList.remove('error');
                totalContainer.classList.add('success');
            } else if (total > 0) {
                totalContainer.classList.add('error');
                totalContainer.classList.remove('success');
            } else {
                totalContainer.classList.remove('error', 'success');
            }
        }
        
        function updateCalculateButton() {
            const allComplete = questions.every((_, index) => {
                const questionAnswers = answers[index] || {};
                const scores = Object.values(questionAnswers);
                const requiredScores = [8, 4, 2, 1];
                return requiredScores.every(score => scores.includes(score)) && scores.length === 4;
            });
            
            const calculateBtn = document.getElementById('calculateBtn');
            calculateBtn.disabled = !allComplete;
        }
        
        function calculateResults() {
            const scores = { I: 0, E: 0, A: 0, P: 0 };
            
            questions.forEach((question, qIndex) => {
                question.options.forEach((option, oIndex) => {
                    const score = answers[qIndex][oIndex];
                    scores[option.category] += score;
                });
            });
            
            displayResults(scores);
        }
        
        function displayResults(scores) {
            const resultsDiv = document.getElementById('results');
            const scoresGrid = document.getElementById('scoresGrid');
            
            const maxScore = Math.max(...Object.values(scores));
            
            scoresGrid.innerHTML = Object.entries(scores).map(([category, score]) => {
                const isHighest = score === maxScore;
                return `
                    <div class="score-card ${isHighest ? 'highest' : ''}">
                        <div class="score-letter">${category}</div>
                        <div class="score-name">${categoryLabels[category]}</div>
                        <div class="score-value">${score}</div>
                    </div>
                `;
            }).join('');
            
            resultsDiv.classList.add('show');
            resultsDiv.scrollIntoView({ behavior: 'smooth' });
        }
        
        function calculateScores() {
            const scores = { I: 0, E: 0, A: 0, P: 0 };
            
            questions.forEach((question, qIndex) => {
                question.options.forEach((option, oIndex) => {
                    const score = answers[qIndex][oIndex];
                    scores[option.category] += score;
                });
            });
            
            return scores;
        }

        // Download visual PDF - captures the current view
        async function downloadVisualPDF() {
            const overlay = document.getElementById('loadingOverlay');
            overlay.classList.add('show');

            try {
                // Hide elements not needed in PDF
                document.getElementById('instructionsSection').style.display = 'none';
                document.getElementById('progressBar').style.display = 'none';
                document.getElementById('totalScore').style.display = 'none';
                document.getElementById('calculateBtn').style.display = 'none';
                document.getElementById('testBtn').style.display = 'none';
                document.getElementById('actionButtons').style.display = 'none';
                
                // Hide all questions
                document.querySelectorAll('.question-block').forEach(block => {
                    block.style.display = 'none';
                });

                // Add date
                const dateElement = document.getElementById('pdfDate');
                dateElement.innerHTML = `Generated on: ${new Date().toLocaleDateString('en-US', { 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                })}`;
                dateElement.classList.add('show');

                // Wait for render
                await new Promise(resolve => setTimeout(resolve, 500));

                // Capture the container
                const container = document.getElementById('mainContainer');
                const canvas = await html2canvas(container, {
                    scale: 2,
                    useCORS: true,
                    backgroundColor: '#ffffff',
                    logging: false
                });

                // Convert to PDF
                const imgData = canvas.toDataURL('image/png');
                const pdf = new jspdf.jsPDF({
                    orientation: 'portrait',
                    unit: 'mm',
                    format: 'a4'
                });

                const imgWidth = 210; // A4 width in mm
                const pageHeight = 297; // A4 height in mm
                const imgHeight = (canvas.height * imgWidth) / canvas.width;
                let heightLeft = imgHeight;
                let position = 0;

                // Add first page
                pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);
                heightLeft -= pageHeight;

                // Add more pages if needed
                while (heightLeft >= 0) {
                    position = heightLeft - imgHeight;
                    pdf.addPage();
                    pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);
                    heightLeft -= pageHeight;
                }

                // Save PDF
                pdf.save('ADIGES_Assessment_Results.pdf');

            } catch (error) {
                console.error('Error generating PDF:', error);
                alert('There was an error generating the PDF. Please try again.');
            } finally {
                // Restore hidden elements
                document.getElementById('instructionsSection').style.display = '';
                document.getElementById('progressBar').style.display = '';
                document.getElementById('totalScore').style.display = '';
                document.getElementById('calculateBtn').style.display = '';
                document.getElementById('testBtn').style.display = '';
                document.getElementById('actionButtons').style.display = '';
                document.getElementById('pdfDate').classList.remove('show');
                
                // Show questions again
                document.querySelectorAll('.question-block').forEach(block => {
                    block.style.display = '';
                });

                overlay.classList.remove('show');
            }
        }

        // Download full PDF with all answers
        async function downloadFullPDF() {
            const overlay = document.getElementById('loadingOverlay');
            overlay.classList.add('show');

            try {
                // Create a temporary container for full report
                const tempContainer = document.createElement('div');
                tempContainer.style.background = 'white';
                tempContainer.style.padding = '20px';
                tempContainer.style.fontFamily = 'Segoe UI, Tahoma, Geneva, Verdana, sans-serif';
                
                // Build full report HTML
                const scores = calculateScores();
                const maxScore = Math.max(...Object.values(scores));
                
                let reportHTML = `
                    <div style="text-align: center; margin-bottom: 30px;">
                        <h1 style="color: #2c2c2c;">ADIGES Assessment - Full Report</h1>
                        <p style="color: #666;">Generated on: ${new Date().toLocaleDateString('en-US', { 
                            year: 'numeric', 
                            month: 'long', 
                            day: 'numeric'
                        })}</p>
                    </div>
                    
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 30px;">
                        <h2 style="color: #2c2c2c; border-bottom: 3px solid #b7ff2f; padding-bottom: 10px;">Results Summary</h2>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-top: 20px;">
                `;
                
                Object.entries(scores).forEach(([category, score]) => {
                    const isHighest = score === maxScore;
                    const percentage = ((score / 300) * 100).toFixed(1);
                    reportHTML += `
                        <div style="padding: 15px; background: ${isHighest ? '#b7ff2f' : 'white'}; border: 2px solid ${isHighest ? '#b7ff2f' : '#e0e0e0'}; border-radius: 10px;">
                            <div style="font-size: 24px; font-weight: bold; color: ${isHighest ? '#2c2c2c' : '#b7ff2f'};">${category}</div>
                            <div style="color: #666; margin: 5px 0;">${categoryLabels[category]}</div>
                            <div style="font-size: 28px; font-weight: bold; color: #2c2c2c;">${score}</div>
                            <div style="color: #666; font-size: 14px;">${percentage}%</div>
                        </div>
                    `;
                });
                
                reportHTML += `
                        </div>
                    </div>
                    
                    <div style="margin-top: 40px;">
                        <h2 style="color: #2c2c2c; border-bottom: 3px solid #b7ff2f; padding-bottom: 10px;">Detailed Responses</h2>
                `;
                
                // Add all questions and answers
                questions.forEach((question, qIndex) => {
                    reportHTML += `
                        <div style="margin: 20px 0; padding: 15px; background: #f8f9fa; border-radius: 10px;">
                            <h3 style="color: #2c2c2c; margin-bottom: 10px;">Question ${qIndex + 1}: ${question.text}</h3>
                    `;
                    
                    question.options.forEach((option, oIndex) => {
                        const score = answers[qIndex][oIndex];
                        reportHTML += `
                            <div style="margin: 8px 0; padding: 10px; background: ${score === 8 ? '#e8f5e9' : 'white'}; border-left: 4px solid ${score === 8 ? '#b7ff2f' : '#e0e0e0'};">
                                <span style="display: inline-block; width: 30px; height: 30px; background: ${score === 8 ? '#b7ff2f' : '#f0f0f0'}; color: #2c2c2c; border-radius: 50%; text-align: center; line-height: 30px; font-weight: bold; margin-right: 10px;">${score}</span>
                                ${option.text}
                            </div>
                        `;
                    });
                    
                    reportHTML += `</div>`;
                });
                
                reportHTML += `</div>`;
                
                tempContainer.innerHTML = reportHTML;
                document.body.appendChild(tempContainer);

                // Capture and convert to PDF
                const canvas = await html2canvas(tempContainer, {
                    scale: 2,
                    useCORS: true,
                    backgroundColor: '#ffffff'
                });

                document.body.removeChild(tempContainer);

                const imgData = canvas.toDataURL('image/png');
                const pdf = new jspdf.jsPDF({
                    orientation: 'portrait',
                    unit: 'mm',
                    format: 'a4'
                });

                const imgWidth = 190; // Leave margins
                const imgHeight = (canvas.height * imgWidth) / canvas.width;
                let heightLeft = imgHeight;
                let position = 10;

                // Add pages as needed
                pdf.addImage(imgData, 'PNG', 10, position, imgWidth, imgHeight);
                heightLeft -= 277; // A4 height minus margins

                while (heightLeft > 0) {
                    position = heightLeft - imgHeight + 10;
                    pdf.addPage();
                    pdf.addImage(imgData, 'PNG', 10, position, imgWidth, imgHeight);
                    heightLeft -= 277;
                }

                pdf.save('ADIGES_Full_Report.pdf');

            } catch (error) {
                console.error('Error generating PDF:', error);
                alert('There was an error generating the PDF. Please try again.');
            } finally {
                overlay.classList.remove('show');
            }
        }
        
        // Test data function
        
        
        // Event Listeners
        document.getElementById('calculateBtn').addEventListener('click', calculateResults);
        
        // Initialize
        document.addEventListener('DOMContentLoaded', initQuestionnaire);
    </script>

    </body>
</html>
